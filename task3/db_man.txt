sudo -i -u postgres  ~~ start shell for psql | # -superuser  |
_____________________________________________|_______________|
createdb / dropdb    ~~ create / delete db   | > -simpleuser |
psql *dbname*        ~~ access to dbname     |               |
_____________________________________________|_______________|
\h                   ~~ HELP                 |
\q                   ~~ get out              |

CREATE TABLE books
( 
    id integer NOT NULL,
    name varchar(32) NOT NULL,
    PRIMARY KEY (id)
);
CREATE TABLE autors
( 
    id integer NOT NULL,
    name varchar(32) NOT NULL,
    PRIMARY KEY (id)
);
CREATE TABLE book_autor
( 
    book_id integer NOT NULL,
    autor_id integer  NOT NULL,
    PRIMARY KEY (book_id , autor_id ),
    FOREIGN KEY (book_id) REFERENCES books,
    FOREIGN KEY (autor_id ) REFERENCES autors
);
insert into books values (0, 'About'), (1, 'Picture of Dorian Grey'), (2, 'After end'), (3, 'Piece and War'), (4, 'Evgeniy Onegin'), (5, 'Dark phantasies'), (6, 'How to alive in Russia'), (7, 'Lifehacks');
insert into autors values (0, 'Zvonov'), (1, 'Petrov'), (2, 'Molchunov');
insert into book_autor values (0, 1), (0, 0), (0, 2), (1, 1), (2, 1), (3, 1), (4, 1), (5, 1), (6, 1), (3, 0), (5, 2), (7, 2);

select count(book_id), autor_id from book_autor INNER JOIN autors group by autor_id
SELECT info.name FROM(
    SELECT count(book_id) as writtenbooks, autors.name
    FROM book_autor
    JOIN autors 
    ON autor_id=autors.id
    GROUP BY autors.name
    ) AS info WHERE info.writtenbooks < 7;


SELECT count(book_id) as bookcount, autors.name, books.name 
FROM book_autor r, books b, autors a 
INNER JOIN autors 
ON autor_id=autors.id 
GROUP BY autors.name;


drop table autors;
drop table books;
drop table book_autor;
Спроектируйте структуру базы данных MySQL/PostgreSQL для библиотеки, удовлетворяющую следующим требованиям:

необходимо хранить только авторов и книги;
книга может быть написана в соавторстве (несколькими авторами);
автор за свою жизнь может написать несколько книг.

Напишите SQL-запрос, который выведет авторов, написавших меньше 7 книг.

